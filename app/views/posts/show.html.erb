<% provide(:title, @post.title) %>

<% if current_admin %>
  <%= link_to 'edit', edit_post_path(@post) %> |
  <%= link_to 'delete', post_path(@post), method: :delete, 
      data: { confirm: 'Are you sure you want to delete this post?' } %>
<% end %>

<div class="post">
<h1><%= @post.title %></h1>

<p class="date">Created: <%= @post.created_at.strftime("%B %d, %Y")  %>
  <% if @post.updated_at != @post.created_at %>
   | Updated: <%= @post.updated_at.strftime("%B %d, %Y") %>
  <% end %>
</p>

<p><%= @post.body %></p>
</div>

<p><strong>Leave a comment!</strong></p>

<%= render 'comments/form', post: @post %>
<%= render 'comments/comments' %>

<% @post.comments.reverse_each do |comment| %>
  <% if comment.valid? %>
    <div class="comment">
      <p><% if comment.name.blank? %>
        Anonymous<br>
      <% else %>
        <%= comment.name %><br>
      <% end %></p>
      <span class="date"><%= comment.created_at.try(:strftime, "%B %d, %Y") %></span>
      <p><%= comment.body %></p>
    </div>
  <% end %>
<% end %>